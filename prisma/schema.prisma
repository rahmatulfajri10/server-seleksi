// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model tbl_role{
  id Int @id @default(autoincrement())
  ur_role String
  tbl_user_roles tbl_user_role[]
  tbl_privileges tbl_privilage[]
  createdAt DateTime @default(now())
  updatedAt DateTime? @updatedAt
}

model tbl_user{
  id Int @id @default(autoincrement())
  username String @unique
  password String
  active Int @default(1)
  tbl_user_roles tbl_user_role[]
  tbl_participants tbl_participant[]
  tbl_logs tbl_log[]
  createdAt DateTime @default(now())
  updatedAt DateTime? @updatedAt
}

model tbl_user_role{
  id Int @id @default(autoincrement())
  id_user Int
  id_role Int
  user_role tbl_role @relation(fields:[id_role], references:[id])
  user tbl_user @relation(fields:[id_user], references:[id])
  createdAt DateTime @default(now())
  updatedAt DateTime? @updatedAt
}

model tbl_privilage{
  id Int @id @default(autoincrement())
  id_role Int
  menu Int
  c Int @default(0)
  r Int @default(0)
  u Int @default(0)
  d Int @default(0)
  privilage_role tbl_role @relation(fields:[id_role] , references:[id])
  privilage_menu tbl_menu @relation(fields:[menu], references:[id])
  createdAt DateTime @default(now())
  updatedAt DateTime? @updatedAt
}

model tbl_menu{
  id Int @id @default(autoincrement())
  nama String
  url String
  parent Int @default(0)
  tbl_privileges tbl_privilage[]
  createdAt DateTime @default(now())
  updatedAt DateTime? @updatedAt
}

model tbl_participant{
  id Int @id @default(autoincrement())
  id_user Int
  participant_user tbl_user @relation(fields:[id_user], references:[id])
  nik String
  no_pendaftaran String
  nama String
  url_foto String
  email String
  createdAt DateTime @default(now())
  updatedAt DateTime? @updatedAt
}

model tbl_log{
  id Int @id @default(autoincrement())
  log_time DateTime @default(now())
  log_event String
  id_user Int
  log_user tbl_user @relation(fields:[id_user], references:[id])
}